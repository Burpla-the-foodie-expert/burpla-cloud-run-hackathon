<!DOCTYPE html>
<html>
<head>
    <title>Chat Example</title>
</head>
<body>
    <div id="messages"></div>
    <input id="messageInput" type="text" placeholder="Type a message...">
    <button onclick="sendMessage()">Send</button>

    <script>
        const messagesDiv = document.getElementById('messages');

        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value;

            displayMessage('You', text);
            input.value = '';

            const response = await fetch('http://localhost:8000/sent', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    user_id: 1,
                    name: 'You',
                    message: text,
                    id: '',
                    is_to_agent: true
                })
            });

            const agentMessage = await response.json();
            displayMessage(agentMessage.name, agentMessage.message);
        }

        function displayMessage(sender, text) {
            const msgDiv = document.createElement('div');
            msgDiv.textContent = `${sender}: ${text}`;
            messagesDiv.appendChild(msgDiv);
        }
    </script>
</body>
</html>
